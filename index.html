<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Spider</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="hud">
    <div id="top-bar">
      <div style="display: flex; gap: 15px; align-items: center;">
        <div>David's Spider - v0.0.6</div>
        <div>Time: <span id="time">0:00</span></div>
        <div>Moves: <span id="moves">0</span></div>
        <div>Score: <span id="score">500</span></div>
        <div>Deals: <span id="deals">5</span></div>
        <div style="color: #22c55e; font-weight: 600;">Sets: <span id="sets-counter" style="color: white;">0</span></div>
        <div class="pill">Seed: <span id="seedLabel"></span></div>
      </div>
      <button id="showStats">ðŸ“Š Stats</button>
    </div>
  </div>

  <div id="menu-bar">
    <div class="card" style="padding: 8px; display: flex; flex-direction: column; gap: 4px;">
      <button id="newBtn" title="N" style="width: 100%; text-align: left;">New Game</button>
      <button id="replayBtn" title="Replay seed" style="width: 100%; text-align: left;">Replay</button>
      <button id="undoBtn" title="U" style="width: 100%; text-align: left;">Undo</button>
      <button id="redoBtn" title="R" style="width: 100%; text-align: left;">Redo</button>
      <button id="hintBtn" title="H" style="width: 100%; text-align: left;">Hint</button>
      <button id="dealBtn" title="D" style="width: 100%; text-align: left; margin-bottom: 8px;">Deal</button>

      <select id="difficulty" style="width: 100%; margin-bottom: 8px; padding: 6px; font-size: 0.9em;">
        <option value="1-suit" selected>1-suit</option>
        <option value="2-suit">2-suit</option>
        <option value="4-suit">4-suit</option>
      </select>

      <label style="display: flex; align-items: center; gap: 6px; margin-bottom: 8px; font-size: 0.9em;">
        <input type="checkbox" id="includeAces">
        <span>Include Aces</span>
      </label>

      <div style="display: flex; gap: 4px; margin-bottom: 8px;">
        <input id="seedInput" type="text" placeholder="custom seed" style="flex: 1; padding: 6px; font-size: 0.9em;"/>
        <button id="setSeedBtn" style="padding: 0 8px;">Set</button>
      </div>

      <div style="display: flex; gap: 4px;">
        <button id="muteBtn" style="flex: 1; padding: 6px;">ðŸ”Š</button>
        <button id="verifyBtn" title="Check deck & invariants" style="flex: 1; padding: 6px;">Verify</button>
      </div>
    </div>
    <span id="dealReason" class="pill" style="display:none; margin-top: 6px; text-align: center; font-size: 0.9em;"></span>
  </div>

  <canvas id="game"></canvas>

  <div id="status"><span class="pill" id="msg"></span></div>

  <div id="winModal" class="modal">
    <div class="modal-content">
      <h2>ðŸ¦š You Win!</h2>
      <div class="win-stats">
        <div>Time: <b id="winTime">0:00</b></div>
        <div>Moves: <b id="winMoves">0</b></div>
        <div>Score: <b id="winScore">0</b></div>
        <div>Difficulty: <b id="winDifficulty">1-suit</b></div>
        <div>Seed: <b id="winSeed">abc123</b></div>
      </div>
      <div class="modal-buttons">
        <button id="playAgain">Play again</button>
        <button id="shareSeed">Share seed</button>
      </div>
    </div>
  </div>

  <div id="hintModal" class="modal">
    <div class="modal-content">
      <h2>ðŸ’¡ Available Moves</h2>
      <div id="hintList" class="hint-list"></div>
      <div class="modal-buttons">
        <button id="closeHint">Close</button>
      </div>
    </div>
  </div>

  <!-- Statistics Modal -->
  <div id="statsModal" class="modal">
    <div class="modal-content" style="max-width: 800px;">
      <h2>ðŸ“Š Game Statistics</h2>
      <div class="stats-container">
        <div class="stats-section">
          <h3>Overall Statistics</h3>
          <div id="overallStats" class="stats-grid"></div>
        </div>
        <div class="stats-section">
          <h3>Recent Games</h3>
          <div id="recentGames" class="recent-games"></div>
        </div>
      </div>
      <div class="modal-buttons">
        <button id="closeStats">Close</button>
      </div>
    </div>
  </div>

  <!-- Keep stats module available -->
  <script type="module" src="./renderUI.js"></script>
  <script src="history.js"></script>
</body>
</html>
